!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("d3-selection"),require("d3")):"function"==typeof define&&define.amd?define(["d3-selection","d3"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).Legend=e(t.d3,t.d3)}(this,(function(t,e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var o,i,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(t){try{return!!t()}catch(t){return!0}},u=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s=!c((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),l=s,f=Function.prototype,p=f.call,d=l&&f.bind.bind(p,p),h=l?d:function(t){return function(){return p.apply(t,arguments)}},g=function(t){return null==t},m=g,v=TypeError,y=function(t){if(m(t))throw v("Can't call method on "+t);return t},b=y,w=Object,S=function(t){return w(b(t))},O=S,j=h({}.hasOwnProperty),x=Object.hasOwn||function(t,e){return j(O(t),e)},P=u,$=x,T=Function.prototype,R=P&&Object.getOwnPropertyDescriptor,E=$(T,"name"),k={EXISTS:E,PROPER:E&&"something"===function(){}.name,CONFIGURABLE:E&&(!P||P&&R(T,"name").configurable)},M={},C=function(t){return t&&t.Math==Math&&t},N=C("object"==typeof globalThis&&globalThis)||C("object"==typeof window&&window)||C("object"==typeof self&&self)||C("object"==typeof a&&a)||function(){return this}()||Function("return this")(),B="object"==typeof document&&document.all,q={all:B,IS_HTMLDDA:void 0===B&&void 0!==B},A=q.all,D=q.IS_HTMLDDA?function(t){return"function"==typeof t||t===A}:function(t){return"function"==typeof t},I=D,G=q.all,L=q.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:I(t)||t===G}:function(t){return"object"==typeof t?null!==t:I(t)},z=L,F=N.document,Y=z(F)&&z(F.createElement),_=function(t){return Y?F.createElement(t):{}},U=_,W=!u&&!c((function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a})),H=u&&c((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),V=L,X=String,J=TypeError,K=function(t){if(V(t))return t;throw J(X(t)+" is not an object")},Z=s,Q=Function.prototype.call,tt=Z?Q.bind(Q):function(){return Q.apply(Q,arguments)},et=N,nt=D,rt=function(t){return nt(t)?t:void 0},ot=function(t,e){return arguments.length<2?rt(et[t]):et[t]&&et[t][e]},it=h({}.isPrototypeOf),at=ot("navigator","userAgent")||"",ct=N,ut=at,st=ct.process,lt=ct.Deno,ft=st&&st.versions||lt&&lt.version,pt=ft&&ft.v8;pt&&(i=(o=pt.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&ut&&(!(o=ut.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=ut.match(/Chrome\/(\d+)/))&&(i=+o[1]);var dt=i,ht=dt,gt=c,mt=!!Object.getOwnPropertySymbols&&!gt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ht&&ht<41})),vt=mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,yt=ot,bt=D,wt=it,St=Object,Ot=vt?function(t){return"symbol"==typeof t}:function(t){var e=yt("Symbol");return bt(e)&&wt(e.prototype,St(t))},jt=String,xt=function(t){try{return jt(t)}catch(t){return"Object"}},Pt=D,$t=xt,Tt=TypeError,Rt=function(t){if(Pt(t))return t;throw Tt($t(t)+" is not a function")},Et=Rt,kt=g,Mt=function(t,e){var n=t[e];return kt(n)?void 0:Et(n)},Ct=tt,Nt=D,Bt=L,qt=TypeError,At={},Dt={get exports(){return At},set exports(t){At=t}},It=N,Gt=Object.defineProperty,Lt=function(t,e){try{Gt(It,t,{value:e,configurable:!0,writable:!0})}catch(n){It[t]=e}return e},zt=Lt,Ft="__core-js_shared__",Yt=N[Ft]||zt(Ft,{}),_t=Yt;(Dt.exports=function(t,e){return _t[t]||(_t[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ut=h,Wt=0,Ht=Math.random(),Vt=Ut(1..toString),Xt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Vt(++Wt+Ht,36)},Jt=N,Kt=x,Zt=Xt,Qt=mt,te=vt,ee=At("wks"),ne=Jt.Symbol,re=ne&&ne.for,oe=te?ne:ne&&ne.withoutSetter||Zt,ie=function(t){if(!Kt(ee,t)||!Qt&&"string"!=typeof ee[t]){var e="Symbol."+t;Qt&&Kt(ne,t)?ee[t]=ne[t]:ee[t]=te&&re?re(e):oe(e)}return ee[t]},ae=tt,ce=L,ue=Ot,se=Mt,le=function(t,e){var n,r;if("string"===e&&Nt(n=t.toString)&&!Bt(r=Ct(n,t)))return r;if(Nt(n=t.valueOf)&&!Bt(r=Ct(n,t)))return r;if("string"!==e&&Nt(n=t.toString)&&!Bt(r=Ct(n,t)))return r;throw qt("Can't convert object to primitive value")},fe=TypeError,pe=ie("toPrimitive"),de=function(t,e){if(!ce(t)||ue(t))return t;var n,r=se(t,pe);if(r){if(void 0===e&&(e="default"),n=ae(r,t,e),!ce(n)||ue(n))return n;throw fe("Can't convert object to primitive value")}return void 0===e&&(e="number"),le(t,e)},he=Ot,ge=function(t){var e=de(t,"string");return he(e)?e:e+""},me=u,ve=W,ye=H,be=K,we=ge,Se=TypeError,Oe=Object.defineProperty,je=Object.getOwnPropertyDescriptor,xe="enumerable",Pe="configurable",$e="writable";M.f=me?ye?function(t,e,n){if(be(t),e=we(e),be(n),"function"==typeof t&&"prototype"===e&&"value"in n&&$e in n&&!n[$e]){var r=je(t,e);r&&r[$e]&&(t[e]=n.value,n={configurable:Pe in n?n[Pe]:r[Pe],enumerable:xe in n?n[xe]:r[xe],writable:!1})}return Oe(t,e,n)}:Oe:function(t,e,n){if(be(t),e=we(e),be(n),ve)try{return Oe(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Se("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Te=u,Re=k.EXISTS,Ee=h,ke=M.f,Me=Function.prototype,Ce=Ee(Me.toString),Ne=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Be=Ee(Ne.exec);Te&&!Re&&ke(Me,"name",{configurable:!0,get:function(){try{return Be(Ne,Ce(this))[1]}catch(t){return""}}});var qe={},Ae={},De={}.propertyIsEnumerable,Ie=Object.getOwnPropertyDescriptor,Ge=Ie&&!De.call({1:2},1);Ae.f=Ge?function(t){var e=Ie(this,t);return!!e&&e.enumerable}:De;var Le=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ze=h,Fe=ze({}.toString),Ye=ze("".slice),_e=function(t){return Ye(Fe(t),8,-1)},Ue=c,We=_e,He=Object,Ve=h("".split),Xe=Ue((function(){return!He("z").propertyIsEnumerable(0)}))?function(t){return"String"==We(t)?Ve(t,""):He(t)}:He,Je=Xe,Ke=y,Ze=function(t){return Je(Ke(t))},Qe=u,tn=tt,en=Ae,nn=Le,rn=Ze,on=ge,an=x,cn=W,un=Object.getOwnPropertyDescriptor;qe.f=Qe?un:function(t,e){if(t=rn(t),e=on(e),cn)try{return un(t,e)}catch(t){}if(an(t,e))return nn(!tn(en.f,t,e),t[e])};var sn=M,ln=Le,fn=u?function(t,e,n){return sn.f(t,e,ln(1,n))}:function(t,e,n){return t[e]=n,t},pn={},dn={get exports(){return pn},set exports(t){pn=t}},hn=D,gn=Yt,mn=h(Function.toString);hn(gn.inspectSource)||(gn.inspectSource=function(t){return mn(t)});var vn,yn,bn,wn=gn.inspectSource,Sn=D,On=N.WeakMap,jn=Sn(On)&&/native code/.test(String(On)),xn=Xt,Pn=At("keys"),$n={},Tn=jn,Rn=N,En=L,kn=fn,Mn=x,Cn=Yt,Nn=function(t){return Pn[t]||(Pn[t]=xn(t))},Bn=$n,qn="Object already initialized",An=Rn.TypeError,Dn=Rn.WeakMap;if(Tn||Cn.state){var In=Cn.state||(Cn.state=new Dn);In.get=In.get,In.has=In.has,In.set=In.set,vn=function(t,e){if(In.has(t))throw An(qn);return e.facade=t,In.set(t,e),e},yn=function(t){return In.get(t)||{}},bn=function(t){return In.has(t)}}else{var Gn=Nn("state");Bn[Gn]=!0,vn=function(t,e){if(Mn(t,Gn))throw An(qn);return e.facade=t,kn(t,Gn,e),e},yn=function(t){return Mn(t,Gn)?t[Gn]:{}},bn=function(t){return Mn(t,Gn)}}var Ln={set:vn,get:yn,has:bn,enforce:function(t){return bn(t)?yn(t):vn(t,{})},getterFor:function(t){return function(e){var n;if(!En(e)||(n=yn(e)).type!==t)throw An("Incompatible receiver, "+t+" required");return n}}},zn=c,Fn=D,Yn=x,_n=u,Un=k.CONFIGURABLE,Wn=wn,Hn=Ln.enforce,Vn=Ln.get,Xn=Object.defineProperty,Jn=_n&&!zn((function(){return 8!==Xn((function(){}),"length",{value:8}).length})),Kn=String(String).split("String"),Zn=dn.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!Yn(t,"name")||Un&&t.name!==e)&&(_n?Xn(t,"name",{value:e,configurable:!0}):t.name=e),Jn&&n&&Yn(n,"arity")&&t.length!==n.arity&&Xn(t,"length",{value:n.arity});try{n&&Yn(n,"constructor")&&n.constructor?_n&&Xn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Hn(t);return Yn(r,"source")||(r.source=Kn.join("string"==typeof e?e:"")),t};Function.prototype.toString=Zn((function(){return Fn(this)&&Vn(this).source||Wn(this)}),"toString");var Qn=D,tr=M,er=pn,nr=Lt,rr=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(Qn(n)&&er(n,i,r),r.global)o?t[e]=n:nr(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:tr.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},or={},ir=Math.ceil,ar=Math.floor,cr=Math.trunc||function(t){var e=+t;return(e>0?ar:ir)(e)},ur=function(t){var e=+t;return e!=e||0===e?0:cr(e)},sr=ur,lr=Math.max,fr=Math.min,pr=ur,dr=Math.min,hr=function(t){return t>0?dr(pr(t),9007199254740991):0},gr=function(t){return hr(t.length)},mr=Ze,vr=function(t,e){var n=sr(t);return n<0?lr(n+e,0):fr(n,e)},yr=gr,br=function(t){return function(e,n,r){var o,i=mr(e),a=yr(i),c=vr(r,a);if(t&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}},wr={includes:br(!0),indexOf:br(!1)},Sr=x,Or=Ze,jr=wr.indexOf,xr=$n,Pr=h([].push),$r=function(t,e){var n,r=Or(t),o=0,i=[];for(n in r)!Sr(xr,n)&&Sr(r,n)&&Pr(i,n);for(;e.length>o;)Sr(r,n=e[o++])&&(~jr(i,n)||Pr(i,n));return i},Tr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Rr=$r,Er=Tr.concat("length","prototype");or.f=Object.getOwnPropertyNames||function(t){return Rr(t,Er)};var kr={};kr.f=Object.getOwnPropertySymbols;var Mr=ot,Cr=or,Nr=kr,Br=K,qr=h([].concat),Ar=Mr("Reflect","ownKeys")||function(t){var e=Cr.f(Br(t)),n=Nr.f;return n?qr(e,n(t)):e},Dr=x,Ir=Ar,Gr=qe,Lr=M,zr=c,Fr=D,Yr=/#|\.prototype\./,_r=function(t,e){var n=Wr[Ur(t)];return n==Vr||n!=Hr&&(Fr(e)?zr(e):!!e)},Ur=_r.normalize=function(t){return String(t).replace(Yr,".").toLowerCase()},Wr=_r.data={},Hr=_r.NATIVE="N",Vr=_r.POLYFILL="P",Xr=_r,Jr=N,Kr=qe.f,Zr=fn,Qr=rr,to=Lt,eo=function(t,e,n){for(var r=Ir(e),o=Lr.f,i=Gr.f,a=0;a<r.length;a++){var c=r[a];Dr(t,c)||n&&Dr(n,c)||o(t,c,i(e,c))}},no=Xr,ro=function(t,e){var n,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(n=u?Jr:s?Jr[c]||to(c,{}):(Jr[c]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(a=Kr(n,r))&&a.value:n[r],!no(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;eo(i,o)}(t.sham||o&&o.sham)&&Zr(i,"sham",!0),Qr(n,r,i,t)}},oo=$r,io=Tr,ao=Object.keys||function(t){return oo(t,io)},co=u,uo=h,so=tt,lo=c,fo=ao,po=kr,ho=Ae,go=S,mo=Xe,vo=Object.assign,yo=Object.defineProperty,bo=uo([].concat),wo=!vo||lo((function(){if(co&&1!==vo({b:1},vo(yo({},"a",{enumerable:!0,get:function(){yo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=vo({},t)[n]||fo(vo({},e)).join("")!=r}))?function(t,e){for(var n=go(t),r=arguments.length,o=1,i=po.f,a=ho.f;r>o;)for(var c,u=mo(arguments[o++]),s=i?bo(fo(u),i(u)):fo(u),l=s.length,f=0;l>f;)c=s[f++],co&&!so(a,u,c)||(n[c]=u[c]);return n}:vo,So=wo;ro({target:"Object",stat:!0,arity:2,forced:Object.assign!==So},{assign:So});var Oo={};Oo[ie("toStringTag")]="z";var jo="[object z]"===String(Oo),xo=jo,Po=D,$o=_e,To=ie("toStringTag"),Ro=Object,Eo="Arguments"==$o(function(){return arguments}()),ko=xo?$o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Ro(t),To))?n:Eo?$o(e):"Object"==(r=$o(e))&&Po(e.callee)?"Arguments":r},Mo=ko,Co=jo?{}.toString:function(){return"[object "+Mo(this)+"]"};jo||rr(Object.prototype,"toString",Co,{unsafe:!0});var No="process"==_e(N.process),Bo=D,qo=String,Ao=TypeError,Do=h,Io=K,Go=function(t){if("object"==typeof t||Bo(t))return t;throw Ao("Can't set "+qo(t)+" as a prototype")},Lo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Do(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Io(n),Go(r),e?t(n,r):n.__proto__=r,n}}():void 0),zo=M.f,Fo=x,Yo=ie("toStringTag"),_o=ot,Uo=M,Wo=u,Ho=ie("species"),Vo=it,Xo=TypeError,Jo=h,Ko=c,Zo=D,Qo=ko,ti=wn,ei=function(){},ni=[],ri=ot("Reflect","construct"),oi=/^\s*(?:class|function)\b/,ii=Jo(oi.exec),ai=!oi.exec(ei),ci=function(t){if(!Zo(t))return!1;try{return ri(ei,ni,t),!0}catch(t){return!1}},ui=function(t){if(!Zo(t))return!1;switch(Qo(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ai||!!ii(oi,ti(t))}catch(t){return!0}};ui.sham=!0;var si,li,fi,pi,di=!ri||Ko((function(){var t;return ci(ci.call)||!ci(Object)||!ci((function(){t=!0}))||t}))?ui:ci,hi=di,gi=xt,mi=TypeError,vi=K,yi=function(t){if(hi(t))return t;throw mi(gi(t)+" is not a constructor")},bi=g,wi=ie("species"),Si=s,Oi=Function.prototype,ji=Oi.apply,xi=Oi.call,Pi="object"==typeof Reflect&&Reflect.apply||(Si?xi.bind(ji):function(){return xi.apply(ji,arguments)}),$i=_e,Ti=h,Ri=function(t){if("Function"===$i(t))return Ti(t)},Ei=Rt,ki=s,Mi=Ri(Ri.bind),Ci=function(t,e){return Ei(t),void 0===e?t:ki?Mi(t,e):function(){return t.apply(e,arguments)}},Ni=ot("document","documentElement"),Bi=h([].slice),qi=TypeError,Ai=/(?:ipad|iphone|ipod).*applewebkit/i.test(at),Di=N,Ii=Pi,Gi=Ci,Li=D,zi=x,Fi=c,Yi=Ni,_i=Bi,Ui=_,Wi=function(t,e){if(t<e)throw qi("Not enough arguments");return t},Hi=Ai,Vi=No,Xi=Di.setImmediate,Ji=Di.clearImmediate,Ki=Di.process,Zi=Di.Dispatch,Qi=Di.Function,ta=Di.MessageChannel,ea=Di.String,na=0,ra={},oa="onreadystatechange";try{si=Di.location}catch(t){}var ia=function(t){if(zi(ra,t)){var e=ra[t];delete ra[t],e()}},aa=function(t){return function(){ia(t)}},ca=function(t){ia(t.data)},ua=function(t){Di.postMessage(ea(t),si.protocol+"//"+si.host)};Xi&&Ji||(Xi=function(t){Wi(arguments.length,1);var e=Li(t)?t:Qi(t),n=_i(arguments,1);return ra[++na]=function(){Ii(e,void 0,n)},li(na),na},Ji=function(t){delete ra[t]},Vi?li=function(t){Ki.nextTick(aa(t))}:Zi&&Zi.now?li=function(t){Zi.now(aa(t))}:ta&&!Hi?(pi=(fi=new ta).port2,fi.port1.onmessage=ca,li=Gi(pi.postMessage,pi)):Di.addEventListener&&Li(Di.postMessage)&&!Di.importScripts&&si&&"file:"!==si.protocol&&!Fi(ua)?(li=ua,Di.addEventListener("message",ca,!1)):li=oa in Ui("script")?function(t){Yi.appendChild(Ui("script"))[oa]=function(){Yi.removeChild(this),ia(t)}}:function(t){setTimeout(aa(t),0)});var sa,la,fa,pa,da,ha,ga,ma,va={set:Xi,clear:Ji},ya=N,ba=/ipad|iphone|ipod/i.test(at)&&void 0!==ya.Pebble,wa=/web0s(?!.*chrome)/i.test(at),Sa=N,Oa=Ci,ja=qe.f,xa=va.set,Pa=Ai,$a=ba,Ta=wa,Ra=No,Ea=Sa.MutationObserver||Sa.WebKitMutationObserver,ka=Sa.document,Ma=Sa.process,Ca=Sa.Promise,Na=ja(Sa,"queueMicrotask"),Ba=Na&&Na.value;Ba||(sa=function(){var t,e;for(Ra&&(t=Ma.domain)&&t.exit();la;){e=la.fn,la=la.next;try{e()}catch(t){throw la?pa():fa=void 0,t}}fa=void 0,t&&t.enter()},Pa||Ra||Ta||!Ea||!ka?!$a&&Ca&&Ca.resolve?((ga=Ca.resolve(void 0)).constructor=Ca,ma=Oa(ga.then,ga),pa=function(){ma(sa)}):Ra?pa=function(){Ma.nextTick(sa)}:(xa=Oa(xa,Sa),pa=function(){xa(sa)}):(da=!0,ha=ka.createTextNode(""),new Ea(sa).observe(ha,{characterData:!0}),pa=function(){ha.data=da=!da}));var qa=Ba||function(t){var e={fn:t,next:void 0};fa&&(fa.next=e),la||(la=e,pa()),fa=e},Aa=N,Da=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ia=function(){this.head=null,this.tail=null};Ia.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Ga=Ia,La=N.Promise,za="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Fa=!za&&!No&&"object"==typeof window&&"object"==typeof document,Ya=N,_a=La,Ua=D,Wa=Xr,Ha=wn,Va=ie,Xa=Fa,Ja=za,Ka=dt;_a&&_a.prototype;var Za=Va("species"),Qa=!1,tc=Ua(Ya.PromiseRejectionEvent),ec=Wa("Promise",(function(){var t=Ha(_a),e=t!==String(_a);if(!e&&66===Ka)return!0;if(!Ka||Ka<51||!/native code/.test(t)){var n=new _a((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[Za]=r,!(Qa=n.then((function(){}))instanceof r))return!0}return!e&&(Xa||Ja)&&!tc})),nc={CONSTRUCTOR:ec,REJECTION_EVENT:tc,SUBCLASSING:Qa},rc={},oc=Rt,ic=TypeError,ac=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw ic("Bad Promise constructor");e=t,n=r})),this.resolve=oc(e),this.reject=oc(n)};rc.f=function(t){return new ac(t)};var cc,uc,sc,lc=ro,fc=No,pc=N,dc=tt,hc=rr,gc=Lo,mc=function(t,e,n){t&&!n&&(t=t.prototype),t&&!Fo(t,Yo)&&zo(t,Yo,{configurable:!0,value:e})},vc=function(t){var e=_o(t),n=Uo.f;Wo&&e&&!e[Ho]&&n(e,Ho,{configurable:!0,get:function(){return this}})},yc=Rt,bc=D,wc=L,Sc=function(t,e){if(Vo(e,t))return t;throw Xo("Incorrect invocation")},Oc=function(t,e){var n,r=vi(t).constructor;return void 0===r||bi(n=vi(r)[wi])?e:yi(n)},jc=va.set,xc=qa,Pc=function(t,e){var n=Aa.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},$c=Da,Tc=Ga,Rc=Ln,Ec=La,kc=rc,Mc="Promise",Cc=nc.CONSTRUCTOR,Nc=nc.REJECTION_EVENT,Bc=nc.SUBCLASSING,qc=Rc.getterFor(Mc),Ac=Rc.set,Dc=Ec&&Ec.prototype,Ic=Ec,Gc=Dc,Lc=pc.TypeError,zc=pc.document,Fc=pc.process,Yc=kc.f,_c=Yc,Uc=!!(zc&&zc.createEvent&&pc.dispatchEvent),Wc="unhandledrejection",Hc=function(t){var e;return!(!wc(t)||!bc(e=t.then))&&e},Vc=function(t,e){var n,r,o,i=e.value,a=1==e.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===e.rejection&&Qc(e),e.rejection=1),!0===c?n=i:(l&&l.enter(),n=c(i),l&&(l.exit(),o=!0)),n===t.promise?s(Lc("Promise-chain cycle")):(r=Hc(n))?dc(r,n,u,s):u(n)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},Xc=function(t,e){t.notified||(t.notified=!0,xc((function(){for(var n,r=t.reactions;n=r.get();)Vc(n,t);t.notified=!1,e&&!t.rejection&&Kc(t)})))},Jc=function(t,e,n){var r,o;Uc?((r=zc.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),pc.dispatchEvent(r)):r={promise:e,reason:n},!Nc&&(o=pc["on"+t])?o(r):t===Wc&&Pc("Unhandled promise rejection",n)},Kc=function(t){dc(jc,pc,(function(){var e,n=t.facade,r=t.value;if(Zc(t)&&(e=$c((function(){fc?Fc.emit("unhandledRejection",r,n):Jc(Wc,n,r)})),t.rejection=fc||Zc(t)?2:1,e.error))throw e.value}))},Zc=function(t){return 1!==t.rejection&&!t.parent},Qc=function(t){dc(jc,pc,(function(){var e=t.facade;fc?Fc.emit("rejectionHandled",e):Jc("rejectionhandled",e,t.value)}))},tu=function(t,e,n){return function(r){t(e,r,n)}},eu=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Xc(t,!0))},nu=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Lc("Promise can't be resolved itself");var r=Hc(e);r?xc((function(){var n={done:!1};try{dc(r,e,tu(nu,n,t),tu(eu,n,t))}catch(e){eu(n,e,t)}})):(t.value=e,t.state=1,Xc(t,!1))}catch(e){eu({done:!1},e,t)}}};if(Cc&&(Gc=(Ic=function(t){Sc(this,Gc),yc(t),dc(cc,this);var e=qc(this);try{t(tu(nu,e),tu(eu,e))}catch(t){eu(e,t)}}).prototype,(cc=function(t){Ac(this,{type:Mc,done:!1,notified:!1,parent:!1,reactions:new Tc,rejection:!1,state:0,value:void 0})}).prototype=hc(Gc,"then",(function(t,e){var n=qc(this),r=Yc(Oc(this,Ic));return n.parent=!0,r.ok=!bc(t)||t,r.fail=bc(e)&&e,r.domain=fc?Fc.domain:void 0,0==n.state?n.reactions.add(r):xc((function(){Vc(r,n)})),r.promise})),uc=function(){var t=new cc,e=qc(t);this.promise=t,this.resolve=tu(nu,e),this.reject=tu(eu,e)},kc.f=Yc=function(t){return t===Ic||undefined===t?new uc(t):_c(t)},bc(Ec)&&Dc!==Object.prototype)){sc=Dc.then,Bc||hc(Dc,"then",(function(t,e){var n=this;return new Ic((function(t,e){dc(sc,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete Dc.constructor}catch(t){}gc&&gc(Dc,Gc)}lc({global:!0,constructor:!0,wrap:!0,forced:Cc},{Promise:Ic}),mc(Ic,Mc,!1),vc(Mc);var ru={},ou=ru,iu=ie("iterator"),au=Array.prototype,cu=ko,uu=Mt,su=g,lu=ru,fu=ie("iterator"),pu=function(t){if(!su(t))return uu(t,fu)||uu(t,"@@iterator")||lu[cu(t)]},du=tt,hu=Rt,gu=K,mu=xt,vu=pu,yu=TypeError,bu=tt,wu=K,Su=Mt,Ou=Ci,ju=tt,xu=K,Pu=xt,$u=function(t){return void 0!==t&&(ou.Array===t||au[iu]===t)},Tu=gr,Ru=it,Eu=function(t,e){var n=arguments.length<2?vu(t):e;if(hu(n))return gu(du(n,t));throw yu(mu(t)+" is not iterable")},ku=pu,Mu=function(t,e,n){var r,o;wu(t);try{if(!(r=Su(t,"return"))){if("throw"===e)throw n;return n}r=bu(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return wu(r),n},Cu=TypeError,Nu=function(t,e){this.stopped=t,this.result=e},Bu=Nu.prototype,qu=function(t,e,n){var r,o,i,a,c,u,s,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Ou(e,l),m=function(t){return r&&Mu(r,"normal",t),new Nu(!0,t)},v=function(t){return f?(xu(t),h?g(t[0],t[1],m):g(t[0],t[1])):h?g(t,m):g(t)};if(p)r=t.iterator;else if(d)r=t;else{if(!(o=ku(t)))throw Cu(Pu(t)+" is not iterable");if($u(o)){for(i=0,a=Tu(t);a>i;i++)if((c=v(t[i]))&&Ru(Bu,c))return c;return new Nu(!1)}r=Eu(t,o)}for(u=p?t.next:r.next;!(s=ju(u,r)).done;){try{c=v(s.value)}catch(t){Mu(r,"throw",t)}if("object"==typeof c&&c&&Ru(Bu,c))return c}return new Nu(!1)},Au=ie("iterator"),Du=!1;try{var Iu=0,Gu={next:function(){return{done:!!Iu++}},return:function(){Du=!0}};Gu[Au]=function(){return this},Array.from(Gu,(function(){throw 2}))}catch(t){}var Lu=La,zu=function(t,e){if(!e&&!Du)return!1;var n=!1;try{var r={};r[Au]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Fu=nc.CONSTRUCTOR||!zu((function(t){Lu.all(t).then(void 0,(function(){}))})),Yu=tt,_u=Rt,Uu=rc,Wu=Da,Hu=qu;ro({target:"Promise",stat:!0,forced:Fu},{all:function(t){var e=this,n=Uu.f(e),r=n.resolve,o=n.reject,i=Wu((function(){var n=_u(e.resolve),i=[],a=0,c=1;Hu(t,(function(t){var u=a++,s=!1;c++,Yu(n,e,t).then((function(t){s||(s=!0,i[u]=t,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),n.promise}});var Vu=ro,Xu=nc.CONSTRUCTOR,Ju=La,Ku=ot,Zu=D,Qu=rr,ts=Ju&&Ju.prototype;if(Vu({target:"Promise",proto:!0,forced:Xu,real:!0},{catch:function(t){return this.then(void 0,t)}}),Zu(Ju)){var es=Ku("Promise").prototype.catch;ts.catch!==es&&Qu(ts,"catch",es,{unsafe:!0})}var ns=tt,rs=Rt,os=rc,is=Da,as=qu;ro({target:"Promise",stat:!0,forced:Fu},{race:function(t){var e=this,n=os.f(e),r=n.reject,o=is((function(){var o=rs(e.resolve);as(t,(function(t){ns(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var cs=tt,us=rc;ro({target:"Promise",stat:!0,forced:nc.CONSTRUCTOR},{reject:function(t){var e=us.f(this);return cs(e.reject,void 0,t),e.promise}});var ss=K,ls=L,fs=rc,ps=ro,ds=nc.CONSTRUCTOR,hs=function(t,e){if(ss(t),ls(e)&&e.constructor===t)return e;var n=fs.f(t);return(0,n.resolve)(e),n.promise};function gs(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof e?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${ms(-a,6)}`:a>9999?`+${ms(a,6)}`:ms(a,4)}-${ms(t.getUTCMonth()+1,2)}-${ms(t.getUTCDate(),2)}${n||r||o||i?`T${ms(n,2)}:${ms(r,2)}${o||i?`:${ms(o,2)}${i?`.${ms(i,3)}`:""}`:""}Z`:""}`;var a}function ms(t,e){return`${t}`.padStart(e,"0")}ot("Promise"),ps({target:"Promise",stat:!0,forced:ds},{resolve:function(t){return hs(this,t)}});const vs=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ys(t,e){return vs.test(t+="")?new Date(t):"function"==typeof e?e(t):e}const bs=Object.getPrototypeOf(Uint8Array),ws=Object.prototype.toString,Ss=t=>null==t?t:`${t}`,Os=t=>()=>t;function js(t,e){return void 0===t&&(t=e),null===t?[void 0,"none"]:qs(t)?[void 0,t]:[t,void 0]}function xs(t,e){return void 0===t&&(t=e),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function Ps(t,e){return null==t?t:void 0===e?t instanceof Array||t instanceof bs?t:Array.from(t):t instanceof e?t:e.from(t)}function $s(t,e,n=Array){return t instanceof n?t.map(e):n.from(t,e)}function Ts(t){return t?.toString===ws}function Rs(t){return Ts(t)&&(void 0!==t.type||void 0!==t.domain)}function Es(t){for(const e of t){if(null==e)continue;const t=typeof e;return"string"===t||"boolean"===t}}function ks(t){for(const e of t)if(null!=e)return e instanceof Date}function Ms(t){for(const e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&ys(e)}function Cs(t){for(const e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function Ns(t,e){for(const n of t)if(null!=n)return e(n)}function Bs(t,e){for(const n of t)if(null!=n&&!e(n))return!1;return!0}function qs(t){return"string"==typeof t&&("none"===(t=t.toLowerCase().trim())||"currentcolor"===t||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||null!==e.color(t))}function As(t){return null==t||function(t){return/^\s*none\s*$/i.test(t)}(t)}function Ds(t){if(null==t)return;const n=t[0],r=t[t.length-1];return e.descending(n,r)}const Is=Symbol("position"),Gs=Symbol("color"),Ls=Symbol("radius"),zs=Symbol("length"),Fs=Symbol("opacity"),Ys=Symbol("symbol"),_s=new Map([["x",Is],["y",Is],["fx",Is],["fy",Is],["r",Ls],["color",Gs],["opacity",Fs],["symbol",Ys],["length",zs]]);function Us(t){return null!=t&&!Number.isNaN(t)}function Ws(t,n){return+Us(n)-+Us(t)||e.ascending(t,n)}function Hs(t){return isFinite(t)?t:NaN}function Vs(t){return t>0&&isFinite(t)?t:NaN}function Xs(t){return t<0&&isFinite(t)?t:NaN}const Js=new Map([["accent",e.schemeAccent],["category10",e.schemeCategory10],["dark2",e.schemeDark2],["paired",e.schemePaired],["pastel1",e.schemePastel1],["pastel2",e.schemePastel2],["set1",e.schemeSet1],["set2",e.schemeSet2],["set3",e.schemeSet3],["tableau10",e.schemeTableau10],["brbg",Zs(e.schemeBrBG,e.interpolateBrBG)],["prgn",Zs(e.schemePRGn,e.interpolatePRGn)],["piyg",Zs(e.schemePiYG,e.interpolatePiYG)],["puor",Zs(e.schemePuOr,e.interpolatePuOr)],["rdbu",Zs(e.schemeRdBu,e.interpolateRdBu)],["rdgy",Zs(e.schemeRdGy,e.interpolateRdGy)],["rdylbu",Zs(e.schemeRdYlBu,e.interpolateRdYlBu)],["rdylgn",Zs(e.schemeRdYlGn,e.interpolateRdYlGn)],["spectral",Zs(e.schemeSpectral,e.interpolateSpectral)],["burd",Qs(e.schemeRdBu,e.interpolateRdBu)],["buylrd",Qs(e.schemeRdYlBu,e.interpolateRdYlBu)],["blues",Ks(e.schemeBlues,e.interpolateBlues)],["greens",Ks(e.schemeGreens,e.interpolateGreens)],["greys",Ks(e.schemeGreys,e.interpolateGreys)],["oranges",Ks(e.schemeOranges,e.interpolateOranges)],["purples",Ks(e.schemePurples,e.interpolatePurples)],["reds",Ks(e.schemeReds,e.interpolateReds)],["turbo",tl(e.interpolateTurbo)],["viridis",tl(e.interpolateViridis)],["magma",tl(e.interpolateMagma)],["inferno",tl(e.interpolateInferno)],["plasma",tl(e.interpolatePlasma)],["cividis",tl(e.interpolateCividis)],["cubehelix",tl(e.interpolateCubehelixDefault)],["warm",tl(e.interpolateWarm)],["cool",tl(e.interpolateCool)],["bugn",Ks(e.schemeBuGn,e.interpolateBuGn)],["bupu",Ks(e.schemeBuPu,e.interpolateBuPu)],["gnbu",Ks(e.schemeGnBu,e.interpolateGnBu)],["orrd",Ks(e.schemeOrRd,e.interpolateOrRd)],["pubu",Ks(e.schemePuBu,e.interpolatePuBu)],["pubugn",Ks(e.schemePuBuGn,e.interpolatePuBuGn)],["purd",Ks(e.schemePuRd,e.interpolatePuRd)],["rdpu",Ks(e.schemeRdPu,e.interpolateRdPu)],["ylgn",Ks(e.schemeYlGn,e.interpolateYlGn)],["ylgnbu",Ks(e.schemeYlGnBu,e.interpolateYlGnBu)],["ylorbr",Ks(e.schemeYlOrBr,e.interpolateYlOrBr)],["ylorrd",Ks(e.schemeYlOrRd,e.interpolateYlOrRd)],["rainbow",el(e.interpolateRainbow)],["sinebow",el(e.interpolateSinebow)]]);function Ks(t,n){return({length:r})=>1===r?[t[3][1]]:2===r?[t[3][1],t[3][2]]:(r=Math.max(3,Math.floor(r)))>9?e.quantize(n,r):t[r]}function Zs(t,n){return({length:r})=>2===r?[t[3][0],t[3][2]]:(r=Math.max(3,Math.floor(r)))>11?e.quantize(n,r):t[r]}function Qs(t,n){return({length:r})=>2===r?[t[3][2],t[3][0]]:(r=Math.max(3,Math.floor(r)))>11?e.quantize((t=>n(1-t)),r):t[r].slice().reverse()}function tl(t){return({length:n})=>e.quantize(t,Math.max(2,Math.floor(n)))}function el(t){return({length:n})=>e.quantize(t,Math.floor(n)+1).slice(0,-1)}function nl(t){const e=`${t}`.toLowerCase();if(!Js.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Js.get(e)}function rl(t,e){const n=nl(t),r="function"==typeof n?n({length:e}):n;return r.length!==e?r.slice(0,e):r}const ol=new Map([["brbg",e.interpolateBrBG],["prgn",e.interpolatePRGn],["piyg",e.interpolatePiYG],["puor",e.interpolatePuOr],["rdbu",e.interpolateRdBu],["rdgy",e.interpolateRdGy],["rdylbu",e.interpolateRdYlBu],["rdylgn",e.interpolateRdYlGn],["spectral",e.interpolateSpectral],["burd",t=>e.interpolateRdBu(1-t)],["buylrd",t=>e.interpolateRdYlBu(1-t)],["blues",e.interpolateBlues],["greens",e.interpolateGreens],["greys",e.interpolateGreys],["purples",e.interpolatePurples],["reds",e.interpolateReds],["oranges",e.interpolateOranges],["turbo",e.interpolateTurbo],["viridis",e.interpolateViridis],["magma",e.interpolateMagma],["inferno",e.interpolateInferno],["plasma",e.interpolatePlasma],["cividis",e.interpolateCividis],["cubehelix",e.interpolateCubehelixDefault],["warm",e.interpolateWarm],["cool",e.interpolateCool],["bugn",e.interpolateBuGn],["bupu",e.interpolateBuPu],["gnbu",e.interpolateGnBu],["orrd",e.interpolateOrRd],["pubugn",e.interpolatePuBuGn],["pubu",e.interpolatePuBu],["purd",e.interpolatePuRd],["rdpu",e.interpolateRdPu],["ylgnbu",e.interpolateYlGnBu],["ylgn",e.interpolateYlGn],["ylorbr",e.interpolateYlOrBr],["ylorrd",e.interpolateYlOrRd],["rainbow",e.interpolateRainbow],["sinebow",e.interpolateSinebow]]);function il(t){const e=`${t}`.toLowerCase();if(!ol.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return ol.get(e)}const al=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function cl(t){return null!=t&&al.has(`${t}`.toLowerCase())}const ul=function(t){let e,n;return(...r)=>((n?.length!==r.length||n.some(((t,e)=>t!==r[e])))&&(n=r,e=t(...r)),e)}((t=>new Intl.NumberFormat(t)));function sl(t){return gs(t,"Invalid Date")}function ll(t){console.warn(t)}function fl(t,e){if((t=Ss(t))!==e)return t}!function(t="en-US"){const e=function(t="en-US"){const e=ul(t);return t=>null==t||isNaN(t)?void 0:e.format(t)}(t)}();const pl=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/;function dl(t){if(void 0===t)return`plot-${Math.random().toString(16).slice(2)}`;if(t=`${t}`,!pl.test(t))throw new Error(`invalid class name: ${t}`);return t}function hl(t,e){if("string"==typeof e)t.property("style",e);else if(null!=e)for(const n of t)Object.assign(n.style,e)}function gl(t){if(null!=t){if("number"==typeof t){const n=t;return{floor:t=>n*Math.floor(t/n),offset:t=>t+n,range:(t,r)=>e.range(Math.ceil(t/n),r/n).map((t=>n*t))}}if("function"!=typeof t.floor||"function"!=typeof t.offset)throw new Error("invalid interval; missing floor or offset function");return t}}const ml=t=>e=>t(1-e),vl=[0,1],yl=new Map([["number",e.interpolateNumber],["rgb",e.interpolateRgb],["hsl",e.interpolateHsl],["hcl",e.interpolateHcl],["lab",e.interpolateLab]]);function bl(t){const e=`${t}`.toLowerCase();if(!yl.has(e))throw new Error(`unknown interpolator: ${e}`);return yl.get(e)}function wl(t,n,r,{type:o,nice:i,clamp:a,zero:c,domain:u=xl(t,r),unknown:s,round:l,scheme:f,interval:p,range:d=(_s.get(t)===Ls?$l(r,u):_s.get(t)===zs?Tl(r,u):_s.get(t)===Fs?vl:void 0),interpolate:h=(_s.get(t)===Gs?null==f&&void 0!==d?e.interpolateRgb:il(void 0!==f?f:"cyclical"===o?"rainbow":"turbo"):l?e.interpolateRound:e.interpolateNumber),reverse:g}){if(p=gl(p),"cyclical"!==o&&"sequential"!==o||(o="linear"),g=!!g,"function"!=typeof h&&(h=bl(h)),1===h.length?(g&&(h=ml(h),g=!1),void 0===d&&2===(d=Float64Array.from(u,((t,e)=>e/(u.length-1)))).length&&(d=vl),n.interpolate((d===vl?Os:kl)(h))):n.interpolate(h),c){const[t,n]=e.extent(u);(t>0||n<0)&&(u=function(t,e=Array){return t instanceof e?t.slice():e.from(t)}(u),Ds(u)!==Math.sign(t)?u[u.length-1]=0:u[0]=0)}return g&&(u=e.reverse(u)),n.domain(u).unknown(s),i&&(n.nice(!0===i?void 0:i),u=n.domain()),void 0!==d&&n.range(d),a&&n.clamp(a),{type:o,domain:u,range:d,scale:n,interpolate:h,interval:p}}function Sl(t,n,{exponent:r=1,...o}){return wl(t,e.scalePow().exponent(r),n,{...o,type:"pow"})}function Ol(t,n,{domain:r=[0],unknown:o,scheme:i="rdylbu",interpolate:a,range:c=(void 0!==a?e.quantize(a,r.length+1):_s.get(t)===Gs?rl(i,r.length+1):void 0),reverse:u}){const s=Ds(Ps(r));if(!e.pairs(r).every((([t,n])=>function(t,n,r){const o=e.descending(t,n);return 0===o||o===r}(t,n,s))))throw new Error(`the ${t} scale has a non-monotonic domain`);return u&&(c=e.reverse(c)),{type:"threshold",scale:e.scaleThreshold(s<0?e.reverse(r):r,void 0===c?[]:c).unknown(o),domain:r,range:c}}function jl(t,n=Hs){return t.length?[e.min(t,(({value:t})=>void 0===t?t:e.min(t,n))),e.max(t,(({value:t})=>void 0===t?t:e.max(t,n)))]:[0,1]}function xl(t,e){const n=_s.get(t);return(n===Ls||n===Fs||n===zs?Pl:jl)(e)}function Pl(t){return[0,t.length?e.max(t,(({value:t})=>void 0===t?t:e.max(t,Hs))):1]}function $l(t,n){const r=t.find((({radius:t})=>void 0!==t));if(void 0!==r)return[0,r.radius];const o=e.quantile(t,.5,(({value:t})=>void 0===t?NaN:e.quantile(t,.25,Vs))),i=n.map((t=>3*Math.sqrt(t/o))),a=30/e.max(i);return a<1?i.map((t=>t*a)):i}function Tl(t,n){const r=e.median(t,(({value:t})=>void 0===t?NaN:e.median(t,Math.abs))),o=n.map((t=>12*t/r)),i=60/e.max(o);return i<1?o.map((t=>t*i)):o}function Rl(t){for(const{value:e}of t)if(void 0!==e)for(let n of e){if(n=+n,n>0)return jl(t,Vs);if(n<0)return jl(t,Xs)}return[1,10]}function El(t){const e=[];for(const{value:n}of t)if(void 0!==n)for(const t of n)e.push(t);return e}function kl(t){return(e,n)=>r=>t(e+r*(n-e))}function Ml(t,n,r,o,{type:i,nice:a,clamp:c,domain:u=jl(o),unknown:s,pivot:l=0,scheme:f,range:p,symmetric:d=!0,interpolate:h=(_s.get(t)===Gs?null==f&&void 0!==p?e.interpolateRgb:il(void 0!==f?f:"rdbu"):e.interpolateNumber),reverse:g}){l=+l;let[m,v]=u;if(m=Math.min(m,l),v=Math.max(v,l),"function"!=typeof h&&(h=bl(h)),void 0!==p&&(h=1===h.length?kl(h)(...p):e.piecewise(h,p)),g&&(h=ml(h)),d){const t=r.apply(l),e=t-r.apply(m),n=r.apply(v)-t;e<n?m=r.invert(t-n):e>n&&(v=r.invert(t+e))}return n.domain([m,l,v]).unknown(s).interpolator(h),c&&n.clamp(c),a&&n.nice(a),{type:i,domain:[m,v],pivot:l,interpolate:h,scale:n}}function Cl(t,n,{exponent:r=1,...o}){return Ml(t,e.scaleDivergingPow().exponent(r=+r),function(t){return.5===t?Al:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t)}}(r),n,{...o,type:"diverging-pow"})}function Nl(t,n,{constant:r=1,...o}){return Ml(t,e.scaleDivergingSymlog().constant(r=+r),function(t){return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),invert:e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}}(r),n,o)}const Bl={apply:t=>t,invert:t=>t},ql={apply:Math.log,invert:Math.exp},Al={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function Dl(t,e,n,r){return wl(t,e,n,r)}const Il=2/Math.sqrt(3),Gl={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*Il,o=r/2;t.moveTo(0,r),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(0,-r),t.lineTo(-n,-o),t.lineTo(-n,o),t.closePath()}},Ll=new Map([["asterisk",e.symbolAsterisk],["circle",e.symbolCircle],["cross",e.symbolCross],["diamond",e.symbolDiamond],["diamond2",e.symbolDiamond2],["hexagon",Gl],["plus",e.symbolPlus],["square",e.symbolSquare],["square2",e.symbolSquare2],["star",e.symbolStar],["times",e.symbolX],["triangle",e.symbolTriangle],["triangle2",e.symbolTriangle2],["wye",e.symbolWye]]);function zl(t){return t&&"function"==typeof t.draw}function Fl(t){return!!zl(t)||"string"==typeof t&&Ll.has(t.toLowerCase())}function Yl(t){if(null==t||zl(t))return t;const e=Ll.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}const _l=Symbol("ordinal");function Ul(t,n,r,{type:o,interval:i,domain:a,range:c,reverse:u,hint:s}){return i=gl(i),void 0===a&&(a=Vl(r,i,t)),"categorical"!==o&&o!==_l||(o="ordinal"),u&&(a=e.reverse(a)),n.domain(a),void 0!==c&&("function"==typeof c&&(c=c(a)),n.range(c)),{type:o,domain:a,range:c,scale:n,hint:s,interval:i}}function Wl(t,n,{type:r,interval:o,domain:i,range:a,scheme:c,unknown:u,...s}){let l;if(o=gl(o),void 0===i&&(i=Vl(n,o,t)),_s.get(t)===Ys)l=function(t){return{fill:Xl(t,"fill"),stroke:Xl(t,"stroke")}}(n),a=void 0===a?function(t){return As(t.fill)?e.symbolsStroke:e.symbolsFill}(l):$s(a,Yl);else if(_s.get(t)===Gs&&(void 0!==a||"ordinal"!==r&&r!==_l||(a=function(t,e="greys"){const n=new Set,[r,o]=rl(e,2);for(const e of t)if(null!=e)if(!0===e)n.add(o);else{if(!1!==e)return;n.add(r)}return[...n]}(i,c),void 0!==a&&(c=void 0)),void 0===c&&void 0===a&&(c="ordinal"===r?"turbo":"tableau10"),void 0!==c))if(void 0!==a){const t=il(c),n=a[0],r=a[1]-a[0];a=({length:o})=>e.quantize((e=>t(n+r*e)),o)}else a=nl(c);if(u===e.scaleImplicit)throw new Error("implicit unknown is not supported");return Ul(t,e.scaleOrdinal().unknown(u),n,{...s,type:r,domain:i,range:a,hint:l})}function Hl(t,e,n,r){let{round:o}=n;return void 0!==o&&t.round(o=!!o),(t=Ul(r,t,e,n)).round=o,t}function Vl(t,n,r){const o=new e.InternSet;for(const{value:e,domain:n}of t){if(void 0!==n)return n();if(void 0!==e)for(const t of e)o.add(t)}if(void 0!==n){const[t,r]=e.extent(o).map(n.floor,n);return n.range(t,n.offset(r))}if(o.size>1e4&&_s.get(r)===Is)throw new Error("implicit ordinal position domain has more than 10,000 values");return e.sort(o,Ws)}function Xl(t,e){let n;for(const{hint:r}of t){const t=r?.[e];if(void 0!==t)if(void 0===n)n=t;else if(n!==t)return}return n}function Jl(t,n,r){return function(t,n=[],r={}){const o=function(t,e,{type:n,domain:r,range:o,scheme:i,pivot:a,projection:c}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==c||(n=Zl);for(const{type:t}of e)if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== ${t}`);if(n===Zl)return;if(void 0!==n)return n;if(void 0===r&&!e.some((({value:t})=>void 0!==t)))return;const u=_s.get(t);if(u===Gs&&void 0===o&&void 0===i&&tf(r,e,qs))return"identity";if(u===Ys&&void 0===o&&tf(r,e,Fl))return"identity";if(u===Ls)return"sqrt";if(u===Fs||u===zs)return"linear";if(u===Ys)return"ordinal";if((r||o||[]).length>2)return Ql(u);if(void 0!==r)return Es(r)?Ql(u):ks(r)?"utc":u!==Gs||null==a&&!cl(i)?"linear":"diverging";const s=e.map((({value:t})=>t)).filter((t=>void 0!==t));return s.some(Es)?Ql(u):s.some(ks)?"utc":u!==Gs||null==a&&!cl(i)?"linear":"diverging"}(t,n,r);if(void 0===r.type&&void 0===r.domain&&void 0===r.range&&null==r.interval&&"fx"!==t&&"fy"!==t&&ef({type:o})){const e=n.map((({value:t})=>t)).filter((t=>void 0!==t));e.some(ks)?ll(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Kl(o)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Kl(o)}".`):e.some(Ms)?ll(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Kl(o)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Kl(o)}".`):e.some(Cs)&&ll(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Kl(o)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Kl(o)}".`)}switch(r.type=o,o){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":r=nf(n,r,af);break;case"identity":switch(_s.get(t)){case Is:r=nf(n,r,af);break;case Ys:r=nf(n,r,rf)}break;case"utc":case"time":r=nf(n,r,of)}switch(o){case"diverging":return function(t,n,r){return Ml(t,e.scaleDiverging(),Bl,n,r)}(t,n,r);case"diverging-sqrt":return function(t,e,n){return Cl(t,e,{...n,exponent:.5})}(t,n,r);case"diverging-pow":return Cl(t,n,r);case"diverging-log":return function(t,n,{base:r=10,pivot:o=1,domain:i=jl(n,o<0?Xs:Vs),...a}){return Ml(t,e.scaleDivergingLog().base(r=+r),ql,n,{domain:i,pivot:o,...a})}(t,n,r);case"diverging-symlog":return Nl(t,n,r);case"categorical":case"ordinal":case _l:return Wl(t,n,r);case"cyclical":case"sequential":case"linear":return function(t,n,r){return wl(t,e.scaleLinear(),n,r)}(t,n,r);case"sqrt":return function(t,e,n){return Sl(t,e,{...n,exponent:.5})}(t,n,r);case"threshold":return Ol(t,0,r);case"quantile":return function(t,n,{range:r,quantiles:o=(void 0===r?5:(r=[...r]).length),n:i=o,scheme:a="rdylbu",domain:c=El(n),interpolate:u,reverse:s}){return void 0===r&&(r=void 0!==u?e.quantize(u,i):_s.get(t)===Gs?rl(a,i):void 0),Ol(t,0,{domain:e.scaleQuantile(c,void 0===r?{length:i}:r).quantiles(),range:r,reverse:s})}(t,n,r);case"quantize":return function(t,n,{range:r,n:o=(void 0===r?5:(r=[...r]).length),scheme:i="rdylbu",domain:a=xl(t,n),unknown:c,interpolate:u,reverse:s}){const[l,f]=e.extent(a);let p;return void 0===r?(p=e.ticks(l,f,o),p[0]<=l&&p.splice(0,1),p[p.length-1]>=f&&p.pop(),o=p.length+1,r=void 0!==u?e.quantize(u,o):_s.get(t)===Gs?rl(i,o):void 0):(p=e.quantize(e.interpolateNumber(l,f),o+1).slice(1,-1),l instanceof Date&&(p=p.map((t=>new Date(t))))),Ds(Ps(a))<0&&p.reverse(),Ol(t,0,{domain:p,range:r,reverse:s,unknown:c})}(t,n,r);case"pow":return Sl(t,n,r);case"log":return function(t,n,{base:r=10,domain:o=Rl(n),...i}){return wl(t,e.scaleLog().base(r),n,{...i,domain:o})}(t,n,r);case"symlog":return function(t,n,{constant:r=1,...o}){return wl(t,e.scaleSymlog().constant(r),n,o)}(t,n,r);case"utc":return function(t,n,r){return Dl(t,e.scaleUtc(),n,r)}(t,n,r);case"time":return function(t,n,r){return Dl(t,e.scaleTime(),n,r)}(t,n,r);case"point":return function(t,n,{align:r=.5,padding:o=.5,...i}){return Hl(e.scalePoint().align(r).padding(o),n,i,t)}(t,n,r);case"band":return function(t,n,{align:r=.5,padding:o=.1,paddingInner:i=o,paddingOuter:a=("fx"===t||"fy"===t?0:o),...c}){return Hl(e.scaleBand().align(r).paddingInner(i).paddingOuter(a),n,c,t)}(t,n,r);case"identity":return _s.get(t)===Is?{type:"identity",scale:e.scaleIdentity()}:{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${o}`)}}(t,void 0===r?void 0:[{hint:r}],{...n})}function Kl(t){return"symbol"==typeof t?t.description:t}const Zl={toString:()=>"projection"};function Ql(t){switch(t){case Is:return"point";case Gs:return _l;default:return"ordinal"}}function tf(t,e,n){return void 0!==t?Ns(t,n)&&Bs(t,n):e.some((({value:t})=>void 0!==t&&Ns(t,n)))&&e.every((({value:t})=>void 0===t||Bs(t,n)))}function ef({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===_l}function nf(t,{domain:e,...n},r){for(const e of t)void 0!==e.value&&(e.value=r(e.value));return{domain:void 0===e?e:r(e),...n}}function rf(t){return $s(t,Yl)}function of(t){return $s(t,uf)}function af(t){return function(t){return t instanceof bs}(t)?t:$s(t,cf,Float64Array)}function cf(t){return null==t?NaN:+t}function uf(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?ys(t):null==t||isNaN(t=+t)?void 0:new Date(t)}const sf=Math.PI,lf=2*sf;function ff({projection:t,inset:n=0,insetTop:r=n,insetRight:o=n,insetBottom:i=n,insetLeft:a=n}={},c){if(null==t)return;if("function"==typeof t.stream)return t;let u,s,l="frame";if(Ts(t)){let e;if(({type:t,domain:s,inset:e,insetTop:r=(void 0!==e?e:r),insetRight:o=(void 0!==e?e:o),insetBottom:i=(void 0!==e?e:i),insetLeft:a=(void 0!==e?e:a),clip:l=l,...u}=t),null==t)return}"function"!=typeof t&&({type:t}=function(t){switch(`${t}`.toLowerCase()){case"albers-usa":return pf(e.geoAlbersUsa,.7463,.4673);case"albers":return df(e.geoAlbers,.7463,.4673);case"azimuthal-equal-area":return pf(e.geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return pf(e.geoAzimuthalEquidistant,lf,lf);case"conic-conformal":return df(e.geoConicConformal,lf,lf);case"conic-equal-area":return df(e.geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return df(e.geoConicEquidistant,7.312,3.6282);case"equal-earth":return pf(e.geoEqualEarth,5.4133,2.6347);case"equirectangular":return pf(e.geoEquirectangular,lf,sf);case"gnomonic":return pf(e.geoGnomonic,3.4641,3.4641);case"identity":return{type:hf};case"reflect-y":return{type:gf};case"mercator":return pf(e.geoMercator,lf,lf);case"orthographic":return pf(e.geoOrthographic,2,2);case"stereographic":return pf(e.geoStereographic,2,2);case"transverse-mercator":return pf(e.geoTransverseMercator,lf,lf);default:throw new Error(`unknown projection type: ${t}`)}}(t));const{width:f,height:p,marginLeft:d,marginRight:h,marginTop:g,marginBottom:m}=c,v=f-d-h-a-o,y=p-g-m-r-i;if(t=t?.({width:v,height:y,clip:l,...u}),null==t)return;l=function(t,n,r,o,i){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return e.geoClipRectangle(n,r,o,i);throw new Error(`unknown projection clip type: ${t}`)}(l,d,g,f-h,p-m);let b,w=d+a,S=g+r;if(null!=s){const[[n,r],[o,i]]=e.geoPath(t).bounds(s),a=Math.min(v/(o-n),y/(i-r));a>0?(w-=(a*(n+o)-v)/2,S-=(a*(r+i)-y)/2,b=e.geoTransform({point(t,e){this.stream.point(t*a+w,e*a+S)}})):ll("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??=0===w&&0===S?hf():e.geoTransform({point(t,e){this.stream.point(t+w,e+S)}}),{stream:e=>t.stream(b.stream(l(e)))}}function pf(t,e,n){return{type:({width:r,height:o,rotate:i,precision:a=.15,clip:c})=>{const u=t();return null!=a&&u.precision?.(a),null!=i&&u.rotate?.(i),"number"==typeof c&&u.clipAngle?.(c),u.scale(Math.min(r/e,o/n)),u.translate([r/2,o/2]),u},aspectRatio:n/e}}function df(t,e,n){const{type:r,aspectRatio:o}=pf(t,e,n);return{type:t=>{const{parallels:e,domain:n,width:o,height:i}=t,a=r(t);return null!=e&&(a.parallels(e),void 0===n&&a.fitSize([o,i],{type:"Sphere"})),a},aspectRatio:o}}const hf=Os({stream:t=>t}),gf=Os(e.geoTransform({point(t,e){this.stream.point(t,-e)}}));function mf(t={},e){const{document:n=("undefined"!=typeof window?window.document:void 0)}=t;return{document:n,projection:ff(t,e)}}function vf(t,{document:n}){return e.select(e.creator(t).call(n.documentElement))}function yf(t){return ef(t)&&void 0===t.interval?void 0:"tabular-nums"}function bf(t,e){if(null==e)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function wf(t,n={},r,o){let{columns:i,tickFormat:a,fontVariant:c=yf(t),swatchSize:u=15,swatchWidth:s=u,swatchHeight:l=u,marginLeft:f=0,className:p,style:d,width:h}=n;const g=mf(n);p=dl(p),a=function(t,n){return void 0===t?ks(n)?sl:Ss:"function"==typeof t?t:("string"==typeof t?ks(n)?e.utcFormat:e.format:Os)(t)}(a,t.domain);const m=vf("div",g).attr("class",p).attr("style",`\n        --swatchWidth: ${+s}px;\n        --swatchHeight: ${+l}px;\n      `);let v;return null!=i?(v=`\n      .${p}-swatch {\n        display: flex;\n        align-items: center;\n        break-inside: avoid;\n        padding-bottom: 1px;\n      }\n      .${p}-swatch::before {\n        flex-shrink: 0;\n      }\n      .${p}-label {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    `,m.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${p}-swatch`).call(r,t).call((t=>t.append("div").attr("class",`${p}-label`).attr("title",a).text(a)))):(v=`\n      .${p} {\n        display: flex;\n        align-items: center;\n        min-height: 33px;\n        flex-wrap: wrap;\n      }\n      .${p}-swatch {\n        display: inline-flex;\n        align-items: center;\n        margin-right: 1em;\n      }\n    `,m.selectAll().data(t.domain).enter().append("span").attr("class",`${p}-swatch`).call(r,t).append((function(){return this.ownerDocument.createTextNode(a.apply(this,arguments))}))),m.call((t=>t.insert("style","*").text(`\n        .${p} {\n          font-family: system-ui, sans-serif;\n          font-size: 10px;\n          margin-bottom: 0.5em;${void 0===f?"":`\n          margin-left: ${+f}px;`}${void 0===h?"":`\n          width: ${h}px;`}\n        }\n        ${o(p)}\n        ${v}\n      `))).style("font-variant",fl(c,"normal")).call(hl,d).node()}const Sf=new Map([["symbol",function(t,{fill:n=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:r=1,stroke:o=(void 0!==t.hint?.stroke?t.hint.stroke:As(n)?"currentColor":"none"),strokeOpacity:i=1,strokeWidth:a=1.5,r:c=4.5,...u}={},s){const[l,f]=js(n),[p,d]=js(o),h=bf(s,l),g=bf(s,p),m=c*c*Math.PI;return r=xs(r)[1],i=xs(i)[1],a=xs(a)[1],wf(t,u,(n=>n.append("svg").attr("viewBox","-8 -8 16 16").attr("fill","color"===l?t=>h.scale(t):null).attr("stroke","color"===p?t=>g.scale(t):null).append("path").attr("d",(n=>{const r=e.path();return t.scale(n).draw(r,m),r}))),(t=>`.${t}-swatch > svg {\n        width: var(--swatchWidth);\n        height: var(--swatchHeight);\n        margin-right: 0.5em;\n        overflow: visible;\n        fill: ${f};\n        fill-opacity: ${r};\n        stroke: ${d};\n        stroke-width: ${a}px;\n        stroke-opacity: ${i};\n      }`))}],["color",jf],["opacity",function({type:t,interpolate:n,...r},{legend:o=!0,color:i=e.rgb(0,0,0),...a}){if(!n)throw new Error(`${t} opacity scales are not supported`);!0===o&&(o="ramp");if("ramp"!==`${o}`.toLowerCase())throw new Error(`${o} opacity legends are not supported`);return jf({type:t,...r,interpolate:xf(i)},{legend:o,...a})}]]);function Of(t,{label:e,ticks:n,tickFormat:r}={},o){return function(t={},...e){let n=t;for(const r of e)for(const e in r)if(void 0===n[e]){const o=r[e];n===t?n={...n,[e]:o}:n[e]=o}return n}(o,t,{label:e,ticks:n,tickFormat:r})}function jf(t,{legend:n=!0,...r}){if(!0===n&&(n="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${n}`.toLowerCase()){case"swatches":return function(t,e){if(!ef(t)&&!function({type:t}){return"threshold"===t}(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return wf(t,e,((t,e)=>t.append("svg").attr("fill",e.scale).append("rect").attr("width","100%").attr("height","100%")),(t=>`.${t}-swatch svg {\n        width: var(--swatchWidth);\n        height: var(--swatchHeight);\n        margin-right: 0.5em;\n      }`))}(t,r);case"ramp":return function(t,n){let{label:r=t.label,tickSize:o=6,width:i=240,height:a=44+o,marginTop:c=18,marginRight:u=0,marginBottom:s=16+o,marginLeft:l=0,style:f,ticks:p=(i-l-u)/64,tickFormat:d,fontVariant:h=yf(t),round:g=!0,className:m}=n;const v=mf(n);m=dl(m),null===d&&(d=()=>null);const y=vf("svg",v).attr("class",m).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call((t=>t.append("style").text(`\n        .${m} {\n          display: block;\n          background: white;\n          height: auto;\n          height: intrinsic;\n          max-width: 100%;\n          overflow: visible;\n        }\n        .${m} text {\n          white-space: pre;\n        }\n      `))).call(hl,f);let b,w=t=>t.selectAll(".tick line").attr("y1",c+s-a);const S=g?(t,e)=>t.rangeRound(e):(t,e)=>t.range(e),{type:O,domain:j,range:x,interpolate:P,scale:$,pivot:T}=t;if(P){const t=void 0===x?P:e.piecewise(1===P.length?kl(P):P,x);b=S($.copy(),e.quantize(e.interpolateNumber(l,i-u),Math.min(j.length+(void 0!==T),void 0===x?1/0:x.length)));const n=256,r=v.document.createElement("canvas");r.width=n,r.height=1;const o=r.getContext("2d");for(let e=0,r=n-1;e<n;++e)o.fillStyle=t(e/r),o.fillRect(e,0,1,1);y.append("image").attr("x",l).attr("y",c).attr("width",i-l-u).attr("height",a-c-s).attr("preserveAspectRatio","none").attr("xlink:href",r.toDataURL())}else if("threshold"===O){const t=j,n=void 0===d?t=>t:"string"==typeof d?e.format(d):d;b=S(e.scaleLinear().domain([-1,x.length-1]),[l,i-u]),y.append("g").selectAll().data(x).enter().append("rect").attr("x",((t,e)=>b(e-1))).attr("y",c).attr("width",((t,e)=>b(e)-b(e-1))).attr("height",a-c-s).attr("fill",(t=>t)),p=$s(t,((t,e)=>e)),d=e=>n(t[e],e)}else b=S(e.scaleBand().domain(j),[l,i-u]),y.append("g").selectAll().data(j).enter().append("rect").attr("x",b).attr("y",c).attr("width",Math.max(0,b.bandwidth()-1)).attr("height",a-c-s).attr("fill",$),w=()=>{};return y.append("g").attr("transform",`translate(0,${a-s})`).call(e.axisBottom(b).ticks(Array.isArray(p)?null:p,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(o).tickValues(Array.isArray(p)?p:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",fl(h,"normal")).call(w).call((t=>t.select(".domain").remove())),void 0!==r&&y.append("text").attr("x",l).attr("y",c-6).attr("fill","currentColor").attr("font-weight","bold").text(r),y.node()}(t,r);default:throw new Error(`unknown legend type: ${n}`)}}function xf(t){const{r:n,g:r,b:o}=e.rgb(t)||e.rgb(0,0,0);return t=>`rgba(${n},${r},${o},${t})`}var Pf=".graph-legend",$f={enabled:!0,itemSelector:null,label:null,width:130},Tf=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="Legend",this.calendar=t,this.root=null,this.shown=!1,this.options=$f}var o,i,a;return o=e,i=[{key:"setup",value:function(t){this.options=Object.assign(Object.assign({},$f),t)}},{key:"paint",value:function(){var e=this.calendar.options.options.scale,n=this.options,o=n.enabled,i=n.itemSelector;if(!o||i&&t.select(i).empty())return this.destroy();this.shown=!0,this.root=t.select(i||this.calendar.options.options.itemSelector),this.root.select(Pf).empty()?this.root=this.root.append("svg").attr("class",Pf.slice(1)):this.root=this.root.select(Pf);var a,c,u,s=function(t={}){for(const[e,n]of Sf){const r=t[e];if(Rs(r)){const o=mf(t);let i;if("symbol"===e){const{fill:e,stroke:n=(void 0===e&&Rs(t.color)?"color":void 0)}=t;i={fill:e,stroke:n}}return n(Jl(e,r,i),Of(o,r,t),(e=>Rs(t[e])?Jl(e,t[e]):null))}}throw new Error("unknown legend type; no scale found")}(Object.assign((a={},c=e.as,u=e,(c=r(c))in a?Object.defineProperty(a,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[c]=u,a),this.options));return this.root.selectAll("*").remove(),this.root.append((function(){return s})),Promise.resolve()}},{key:"destroy",value:function(){return null!==this.root&&(this.root.remove(),this.root=null),Promise.resolve()}}],i&&n(o.prototype,i),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1}),e}();return Tf}));//# sourceMappingURL=Legend.min.js.map
